<!DOCTYPE html>
<html lang="cs">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Evidence osobních výdajů &ndash; Jestřáblog</title>

    <!-- Meta -->
    <meta name="description" content="Jestřáblog &ndash; Život z ptačí perspektivy">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Social -->
    <meta property="article:author" content="Petr Nohejl" />
    <meta property="article:section" content="Informační technologie" />
    <meta property="article:published_time" content="2014-03-04" />

    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Evidence osobních výdajů"/>
    <meta property="og:description" content="Už nějakou dobu plánuju, že si začnu evidovat osobní výdaje. Je dobré mít základní přehled, kolik člověk utratí za jídlo, bydlení, dopravu atd. Existuje hromada mobilních aplikací na evidenci výdajů, ale používání takové aplikace je vcelku otravné - ťukat si do mobilu každý výdaj by mě fakt nebavilo. Navíc bych na …"/>
    <meta property="og:site_name" content="Jestřáblog" />
    <meta property="og:url" content="http://blog.petrnohejl.cz/evidence-osobnich-vydaju"/>

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Evidence osobních výdajů">
    <meta name="twitter:description" content="Už nějakou dobu plánuju, že si začnu evidovat osobní výdaje. Je dobré mít základní přehled, kolik člověk utratí za jídlo, bydlení, dopravu atd. Existuje hromada mobilních aplikací na evidenci výdajů, ale používání takové aplikace je vcelku otravné - ťukat si do mobilu každý výdaj by mě fakt nebavilo. Navíc bych na …">
    <meta name="twitter:url" content="http://blog.petrnohejl.cz/evidence-osobnich-vydaju">

    <!-- Feed -->
    <link rel="alternate" type="application/atom+xml" href="http://blog.petrnohejl.cz/feed.xml" title="Jestřáblog Atom Feed" />
    <link rel="alternate" type="application/rss+xml" href="http://petrnohejl.disqus.com/latest.rss" title="Jestřáblog Comments RSS Feed">

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans:regular,bold">
    <link rel="stylesheet" type="text/css" href="http://blog.petrnohejl.cz/theme/css/w3.css">
    <link rel="stylesheet" type="text/css" href="http://blog.petrnohejl.cz/theme/css/style.css">
    <link rel="stylesheet" type="text/css" href="http://blog.petrnohejl.cz/theme/css/jqcloud.css">
    <link rel="stylesheet" type="text/css" href="http://blog.petrnohejl.cz/theme/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="http://blog.petrnohejl.cz/theme/css/pygments-highlight-github.css">
    <link rel="stylesheet" type="text/css" href="http://blog.petrnohejl.cz/static/custom.css">

    <!-- Icon -->
    <link rel="shortcut icon" type="image/x-icon" href="http://blog.petrnohejl.cz/favicon.ico">

    <!-- JavaScript -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="http://blog.petrnohejl.cz/theme/js/jqcloud.min.js"></script>
  </head>

  <body>
    <div class="w3-row w3-card w3-white">
      <header id="header">
        <a href="http://blog.petrnohejl.cz" id="header-logo" title="Home">PN</a>
        <nav id="header-menu">
          <ul>
            <li class="w3-bottombar w3-border-white w3-hover-border-green"><a href="/categories.html">Categories</a></li>
            <li class="w3-bottombar w3-border-white w3-hover-border-green"><a href="/archive.html">Archive</a></li>
          </ul>
        </nav>
      </header>
    </div>



    <br><br><br>

    <article>
      <header class="w3-container col-main">
        <h1>Evidence osobních výdajů</h1>
        <div class="post-info">
          <div class="w3-opacity w3-margin-right w3-margin-bottom" style="flex-grow: 1;">
            <span><time datetime="2014-03-04T00:00:00+01:00">04.03.2014</time> in <a href="http://blog.petrnohejl.cz/category/informacni-technologie" title="All articles in category Informační technologie">Informační technologie</a></span>
          </div>
        </div>
      </header>

      <br>


      <div class="col-main w3-container">
        <section id="content">
          <p>Už nějakou dobu plánuju, že si začnu evidovat osobní výdaje. Je dobré mít základní přehled, kolik člověk utratí za jídlo, bydlení, dopravu atd. Existuje hromada mobilních aplikací na evidenci výdajů, ale používání takové aplikace je vcelku otravné - ťukat si do mobilu každý výdaj by mě fakt nebavilo. Navíc bych na to určitě i často zapomínal.</p>
<p>Chci nějaký základní přehled výdajů za jednotlivé měsíce v roce. Položky by měly být kategorizované (jídlo, doprava, dovolená apod.). Výstupem by měla být tabulka a nějaké grafy. Evidence příjmů mě nezajímá - na to mám zase jiné <a href="http://fakturoid.cz">nástroje</a>. Navíc příjmy z podnikání mi tečou na podnikatelský účet, nikoliv osobní. Přemýšlel jsem, jak nejsnáze celý tento problém řešit a dospěl jsem k následujícímu.</p>
<h2 id="expensespy">Expenses.py</h2>
<p>Vzhledem k tomu, že téměř všechno platím přes banku kartou nebo převodem (výjimkou jsou restaurace), využiju export transakcí z internetového bankovnictví. Fio banka podporuje CSV export, který půjde pro mé potřeby krásně použít. Mohl bych také použít <a href="http://www.fio.cz/bankovni-sluzby/api-bankovnictvi">Fio API</a> pro vývojáře a naprogramovat si na to nějakou vlastní aplikaci, ale nepotřebuju mít evidenci výdajů automatizovanou. Stačí mi statistiku udělat max. jednou za kvartál a sledovat, jak se vyvíjí trendy. Stáhnout 4x za rok CSV soubor z bankovnictví není pro mě přítěž. Preferuji jednoduché řešení, takže jsem Fio API prozatím zavrhl.</p>
<p>Data bych tedy měl - CSV soubor z Fio bankingu. Nyní potřebuju data upravit a zobrazit v čitelné podobě. Napsal jsem si jednoduchý Python skript <a href="https://github.com/petrnohejl/Expenses">expenses.py</a>, který ten CSV soubor upraví a provede automatickou kategorizaci. Skript provede celkem 3 modifikace:</p>
<ul>
<li>Invertuje znaménko u peněžních částek, takže výdaje jsou kladné a příjmy záporné. Je to kvůli koláčovému grafu (na grafu nelze zobrazit záporné hodnoty).</li>
<li>Přidá sloupeček s měsícem. V CSV tabulce je sice datum, ale to neumí kontingenční tabulka zpracovat. K měsíci navíc přidá prefix s číslem, protože v Google Doc se sloupečky řadí podle abecedy a nepřišel jsem na to, jak to řadit podle pořadí v tom původním CSV. Např. pro platbu uskutečněnou v březnu přidá skript popisek <em>"03 březen"</em>.</li>
<li>Přidá sloupeček s kategorií. Ty jsou detekovány automaticky pomocí regulárních výrazů.</li>
</ul>
<p>Upravené CSV následně importuji do Google Doc a vytvořím <a href="http://cs.wikipedia.org/wiki/Kontingen%C4%8Dn%C3%AD_tabulka">kontingenční tabulku</a>. Z kontingenční tabulky si dále vygeneruji grafy. Výsledkem jsou pěkné statistiky, kde mám všechny důležité údaje, které mě zajímají. Samozřejmě tam budou nějaké nepřesnosti, ale pro základní přehled výdajů to stačí.</p>
<h2 id="jak-si-za-10-minut-vyrobit-prehled-vydaju-za-cely-rok">Jak si za 10 minut vyrobit přehled výdajů za celý rok</h2>
<p>Zde uvádím podrobný návod, jak si pomocí mého skriptu rychle vytvořit pěknou evidenci výdajů.</p>
<ol>
<li>Stáhneme si CSV soubor z Fio banky: <em>Přehledy -&gt; Pohyby -&gt; Exportovat data jako CSV formát</em> (ikonka v horní liště). Nezapomeneme nastavit období, za které budeme statistiku tvořit.</li>
<li>CSV soubor proženeme Python skriptem <a href="https://github.com/petrnohejl/Expenses">expenses.py</a>. Skript se spustí příkazem <code>python expenses.py mydata.csv</code>. Výstupem je nový CSV soubor <em>mydata_categorized.csv</em>.</li>
<li>V Google Doc si vytvoříme novou tabulku a importujeme upravené CSV: <em>Soubor -&gt; Importovat</em>. Akce importu: <em>Nahradit aktuální list</em>. Znak oddělovače: <em>Vlastní: středník</em>.</li>
<li>Odstraníme metadata v tabulce: <em>Označit řádky -&gt; Smazat řádky 1-n</em>. Fio na začátek a konec CSV přidává nějaký balast navíc (info o účtu, období, stav účtu atd.).</li>
<li>Nastavíme si automatickou šířku sloupců: <em>Označit sloupce -&gt; Změnit velikost sloupců A-N -&gt; Přizpůsobit datům</em>.</li>
<li>U sloupce <em>měsíc</em> nastavíme typ dat jako text: <em>Formát -&gt; Číslo -&gt; Prostý text</em>. Je to proto, abychom předešli automatickému přepsání <em>"09 září"</em> na <em>"9.9.2014"</em>, což se mi právě stalo.</li>
<li>Nyní ručně zkontrolujeme kategorie, zda jsou správně přiřazeny. Hlavně je potřeba zkontrolovat kategorii <em>Dary</em>, jelikož se těžko detekuje. Doplníme kategorie tam, kde chybí. V mém případě skript detekoval kategorii u cca 80% transakcí, ale před kategorizací jsem samozřejmě upravil regulární výrazy v <a href="https://github.com/petrnohejl/Expenses">expenses.py</a> tak, aby pokryly co nejvíce položek.</li>
<li>Vytvoříme kontingenční tabulku: <em>Data -&gt; Přehled kontingenčních tabulek</em>.</li>
<li>Nakonfigurujeme kontingenční tabulku. Řádky: <em>Kategorie</em>. Sloupce: <em>Měsíc</em>. Hodnoty: <em>Objem</em> jako <em>SUM</em>.</li>
<li>Nastavíme filtr: <em>Kategorie</em>. Odfiltrujeme kategorii <em>Interní transakce</em>, protože tato kategorie zahrnuje tok peněz mezi mými účty (osobní, podnikatelský, spořící). Tím se odfiltrují i hlavní příjmy, které mě nezajímají a v grafech by navíc mohly dělat neplechu kvůli záporným hodnotám.</li>
<li>Vytvoříme si tři grafy (sloupcový, skládaný pruhový, výsečový): <em>Vložit -&gt; Graf</em>. U všech grafů využijeme v nastavení (záložka <em>Přizpůsobit</em>) funkci <em>Maximalizovat</em>, aby byl graf zvětšený na celou obrazovku. Po vytvoření grafu aplikujeme funkci <em>Přesunout do vlastního listu</em>, aby byl každý graf ve zvlášť záložce.</li>
</ol>
<p>Výsledný dokument má 5 listů: CSV data, kontingenční tabulka a 3 grafy. Následuje ukázka výstupů. Použitá data jsou smyšlená.</p>
<p><img alt="CSV data" src="http://blog.petrnohejl.cz/images/evidence-osobnich-vydaju-01.png"></p>
<p><img alt="Kontingenční tabulka" src="http://blog.petrnohejl.cz/images/evidence-osobnich-vydaju-02.png"></p>
<p><img alt="Sloupcový graf" src="http://blog.petrnohejl.cz/images/evidence-osobnich-vydaju-03.png"></p>
<p><img alt="Skládaný pruhový graf" src="http://blog.petrnohejl.cz/images/evidence-osobnich-vydaju-04.png"></p>
<p><img alt="Výsečový graf" src="http://blog.petrnohejl.cz/images/evidence-osobnich-vydaju-05.png"></p>
<h2 id="jine-alternativy">Jiné alternativy</h2>
<p>Na závěr bych rád zmínil nějaké alternativy k mému řešení evidence výdajů pomocí expenses.py. Zajímavý je <a href="https://plus.google.com/u/0/111783114889748547827/posts/BZnsgkYdkA4">skript od Filipa Hráčka</a>, který využívá <a href="http://www.fio.cz/bankovni-sluzby/api-bankovnictvi">Fio API</a> a technologii <a href="http://www.google.com/script/start/">Google Apps Script</a>. Ačkoliv uvedené video sklidilo ostrou <a href="http://www.lupa.cz/clanky/google-vam-zadarmo-zkontroluje-bankovni-vypis-je-o-co-stat/">kritiku</a> kvůli bezpečnostním problémům, příjde mi to jako vcelku zajímavé řešení.</p>
<p>Další možností pro evidenci výdajů je skript <a href="https://github.com/honzajavorek/finances">finances.py</a>, který napsal kamarád Honza Javorek. Tenhle skript opět využívá Fio API a transakce ukládá do tabulky v Google Doc. Ze získaných dat lze poté vytvářet kontingenční tabulky a grafy.</p>
<p>Jako poslední alternativu bych chtěl zmínit nové <a href="http://www.mbank.cz/osobni/sluzby/internetove-bankovnictvi/spravce-financi/index.html">internetové bankovnictví od mBank</a>. Zde se objevila funkce, která umožňuje zařazovat jednotlivé peněžní operace do kategorií a třídit podle tagů. Následně lze zobrazit různé přehledy příjmů/výdajů a grafy.</p>
<p>A jak si evidujete své osobní výdaje vy? Napište do diskuse!</p>
        </section>

        <br><br><br>

        <footer>
          <div class="adjust-width">
            <div id="author-block" class="w3-light-grey w3-border">
              <div id="author-info">
                <a href="http://petrnohejl.cz"><img style="width: 60px; height: 60px;" src="http://www.gravatar.com/avatar/8fafd9d1a430a1e843478f00c3da924a?s=240" onerror="this.src='theme/images/avatar.png'" alt="Avatar"></a>
                <div style="margin-left: 20px; margin-top: 15px;">
                  <a href="http://petrnohejl.cz"><span id="author-name" class="w3-hover-text-dark-grey">Petr Nohejl</span></a>
                  <p id="author-story">Hi! I’m Petr – an Android engineer living in Brno, Czech Republic. I’m passionate about code, software architecture and technology. I studied at the Brno University of Technology and currently I work at STRV as team lead of the Android department. I’ve been developing mobile apps since 2009. I like #android #coffee #reggae #photography #djembe #asianculture #valueinvesting #myfamily.</p>
                </div>
              </div>
            </div>
          </div>

          <br><br><br>

          <p style="font-size:10pt; font-style: italic;">Did you like this article? Share it with your friends!</p>
          <div id="share" class="share">
            <a href="http://www.facebook.com/sharer.php?u=http%3A//blog.petrnohejl.cz/evidence-osobnich-vydaju&amp;t=Jest%C5%99%C3%A1blog%3A%20Evidence%20osobn%C3%ADch%20v%C3%BDdaj%C5%AF" target="_blank" class="w3-btn w3-indigo">
              <i class="fa fa-facebook"></i> <span>Facebook</span>
            </a>
            <a href="http://twitter.com/share?url=http%3A//blog.petrnohejl.cz/evidence-osobnich-vydaju&amp;text=Jest%C5%99%C3%A1blog%3A%20Evidence%20osobn%C3%ADch%20v%C3%BDdaj%C5%AF" target="_blank" class="w3-btn w3-blue">
              <i class="fa fa-twitter"></i> <span>Twitter</span>
            </a>
            <a href="https://plus.google.com/share?url=http%3A//blog.petrnohejl.cz/evidence-osobnich-vydaju" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;" class="w3-btn w3-red">
              <i class="fa fa-google-plus"></i> <span>Google</span>
            </a>
          </div>

          <br><br><br>


          <div id="disqus_thread"></div>
          <script>
            /**
             *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
             *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
             */
            
            var disqus_config = function () {
              this.page.url = 'http://blog.petrnohejl.cz';  // Replace PAGE_URL with your page's canonical URL variable
              this.page.identifier = 'evidence-osobnich-vydaju'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
            };
            
            (function() {  // REQUIRED CONFIGURATION VARIABLE: EDIT THE SHORTNAME BELOW
              var d = document, s = d.createElement('script');
              
              s.src = 'https://petrnohejl.disqus.com/embed.js';  // IMPORTANT: Replace EXAMPLE with your forum shortname!
              
              s.setAttribute('data-timestamp', +new Date());
              (d.head || d.body).appendChild(s);
            })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
          <br><br><br>

        </footer>
      </div>
    </article>


    <footer id="footer">
      <div id="footer-copyright" class="w3-center w3-small w3-text-grey w3-padding-48">
        <span>&copy; 2009-2017 Petr Nohejl  | <a href="http://blog.petrnohejl.cz/feed.xml">Atom feed <i class="fa fa-rss" aria-hidden="true"></i></a></span>
      </div>
    </footer>

    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-17930136-2', 'auto');
      ga('send', 'pageview');
    </script>

  </body>
</html>